= mc-srv-tools(7)
:doctype: manpage
:manmanual: mc-srv-tools Manual
:mansource: mc-srv-tools 0.1.0

== NAME

mc-srv-tools - systemd and tmux based Minecraft server instance manager

== DESCRIPTION

mc-srv-tools provides templated systemd units and helper scripts to run one or more
Minecraft servers as named instances.

Each instance:

- runs in its own tmux session
- is controlled by `mc@<instance>.service`

== UNITS

`mc@.service`::
Starts and stops a Minecraft instance in a tmux session.

== CONFIGURATION

Configuration is read from environment files:

- `/etc/default/mc/common.env` (shared defaults)
- `/etc/default/mc/<instance>.env` (instance-specific)

Important per-instance keys:

`MC_SERVER_DIR`::
Required. Server directory containing world data and server jar.

`MC_JAR_NAME`::
Required. Jar file name inside `MC_SERVER_DIR`.

`MC_JAVA_BIN`::
Java executable path. Default: `/usr/bin/java`.

`MC_XMX`, `MC_XMS`::
JVM heap settings. Default: `4G`.

`MC_TMUX_SESSION`::
tmux session name. Default: `mc-<instance>`.

`MC_STOP_WARN_PLAYERS`::
Send title/subtitle warnings before stop. Default: `1`.

`MC_STOP_WARN_DELAY`::
Seconds between warning commands. Default: `6`.

`MC_STOP_WARN_FILE`::
Optional path to a custom warnings file.
One Minecraft console command per line; blank lines and `#` comments are ignored.

`MC_STOP_TIMEOUT`::
Seconds to wait for graceful stop before failing stop operation.

== EXAMPLES

Enable and start one instance named `fabric_kmz`:

----
systemctl enable --now mc@fabric_kmz.service
----

Attach to the instance console:

----
tmux attach -t mc-fabric_kmz
----

== FILES

`/usr/lib/systemd/system/mc@.service`

`/usr/bin/mc-tmux-start.sh`

`/usr/bin/mc-tmux-stop.sh`

`/etc/default/mc/common.env`

`/etc/default/mc/<instance>.env`

`/usr/share/doc/mc-srv-tools/examples/mc-common.env.example`

`/usr/share/doc/mc-srv-tools/examples/mc-instance.env.example`

`/usr/share/doc/mc-srv-tools/examples/mc-stop-warn.commands.example`

== SEE ALSO

systemd(1), systemd.service(5), tmux(1), java(1)
